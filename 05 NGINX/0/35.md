To limit bandwidth and speed per connection in Apache2 and NGINX, you use specific modules and directives designed for rate
limiting and bandwidth control:

### Apache2

1. **mod_ratelimit Module**  
   Apache provides the `mod_ratelimit` module to limit bandwidth per connection.

   - Enable the module:
     ```
     sudo a2enmod ratelimit
     systemctl restart apache2
     ```
   - Configure in your site config or `.htaccess` inside `<Location>`, `<Directory>`, or `<VirtualHost>`:
     ```
     <Location "/downloads">
       SetOutputFilter RATE_LIMIT
       SetEnv rate-limit 400       # Limit speed to 400 KiB/s
       SetEnv rate-initial-burst 512  # Allow initial burst of 512 KiB before throttling
     </Location>
     ```
     This limits the bandwidth to about 400 KiB/s per connection with an initial burst to improve user experience. Note rate
     limiting is per response, not aggregated per IP.

2. **mod_bw (Bandwidth Module)**  
   For more advanced bandwidth and connection limits, `mod_bw` can be used (may require installation).
   - Example:
     ```
     <IfModule mod_bw.c>
       BandWidthModule On
       BandWidth all 512000        # Limit total bandwidth to 512 KB/s
       MaxConnection all 100       # Limit to 100 concurrent connections
     </IfModule>
     ```

### NGINX

1. **limit_rate Directive**  
   To limit bandwidth per connection, use the `limit_rate` directive inside `location` blocks:

   ```
   location /downloads/ {
     limit_rate 50k;  # Limit speed to 50 KB/s per connection
   }
   ```

   This limits the speed on a per-connection basis.

2. **limit_conn Module**  
   To limit the number of connections from a single client IP:

   ```
   limit_conn_zone $binary_remote_addr zone=addr:10m;

   server {
     location / {
       limit_conn addr 2;  # Limit 2 connections per IP
     }
   }
   ```

### Summary

| Feature                | Apache2                                      | NGINX                                |
| ---------------------- | -------------------------------------------- | ------------------------------------ |
| Bandwidth limit module | mod_ratelimit, mod_bw                        | limit_rate directive                 |
| Per connection speed   | `SetEnv rate-limit` (mod_ratelimit)          | `limit_rate` directive               |
| Connection limits      | mod_bw (MaxConnection), mod_evasive for DoS  | limit_conn_zone + limit_conn         |
| Config location        | `<Location>`, `<Directory>`, `<VirtualHost>` | Inside `location` or `server` blocks |

This setup allows precise bandwidth and connection speed management to optimize resource usage and protect server stability
in both Apache2 and NGINX.[1][2][4][5][8]

[1](https://www.simplified.guide/apache/limit-bandwidth) [2](https://www.wqtool.com/en/article/f5af5e8e20080d6b.html)
[3](https://www.reddit.com/r/linuxadmin/comments/gavav1/bandwidth_limit_per_ip_based_on_usage_apache/)
[4](https://tecadmin.net/limit-bandwidth-and-connections-in-apache-on-centos/)
[5](https://httpd.apache.org/docs/current/mod/mod_ratelimit.html)
[6](https://stackoverflow.com/questions/131681/how-can-i-implement-rate-limiting-with-apache-requests-per-second)
[7](https://httpd.apache.org/docs/trunk/misc/perf-tuning.html) [8](https://access.redhat.com/solutions/2189701)
