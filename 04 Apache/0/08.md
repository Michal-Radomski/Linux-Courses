To set per-user web directories in Apache (httpd), you use the mod_userdir module, which allows users to have web directories
accessible via URLs like http://example.com/~username/.

Here are the main steps to configure it:

1. Enable mod_userdir:

   - In your main Apache config file (httpd.conf), ensure the line loading the module is uncommented:
     ```
     LoadModule userdir_module modules/mod_userdir.so
     ```
   - Include the per-user configuration file:
     ```
     Include conf/extra/httpd-userdir.conf
     ```

2. Configure per-user directories:

   - Edit the file `httpd-userdir.conf` (or the equivalent included config) to enable or disable user directories. For
     example:
     ```
     UserDir disabled
     UserDir enabled user1
     ```
     This disables it globally but enables for user1 explicitly.

3. Set up the user's public web directory:

   - Each user should have a `public_html` directory inside their home directory:
     ```
     mkdir ~/public_html
     ```
   - Set correct permissions so Apache can access it:
     ```
     chmod 750 $HOME
     chmod -R 750 $HOME/public_html
     ```

4. Ensure Apache has the necessary filesystem permissions and any required group memberships to access user directories.

5. Restart Apache to apply changes:
   ```
   service apache2 restart
   ```

After this, a user's site can be accessed via:

```
http://yourserver/~user1/
```

This setup allows individual users to serve web content from their home directories securely and conveniently. Additional
configuration such as setting up virtual hosts and adjusting access permissions might be necessary for production
environments.[1][3][7]

[1](https://howtolamp.com/lamp/httpd/2.4/customizing/per-user-web-directories/)
[2](https://stackoverflow.com/questions/24658612/apache-set-different-users-depending-on-the-folder)
[3](https://httpd.apache.org/docs/2.4/howto/public_html.html)
[4](https://www.pugetsystems.com/labs/hpc/note-how-to-setup-apache-on-ubuntu-22-04-for-user-public_html/)
[5](https://documentation.help/httpd-2.0-de/public_html.html) [6](https://www.simplified.guide/apache/change-user-and-group)
[7](https://httpd.apache.org/docs/2.4/mod/mod_userdir.html) [8](https://www.youtube.com/watch?v=ntcPEU_VzY8)
[9](https://blog.renu.ac.ug/apache2-per-user-web-directories-ubuntu-14-04/)
[10](https://stackoverflow.com/questions/39239276/how-to-enable-a-directory-listing-in-apache-web-server)
